language: node_js

cache:
  npm: true

env:
  global:
    - GUNDB_PASS=test
    - JWT_PASS=test
    - MNEMONIC="choice congress hobby buddy dutch busy army eager empty solution start grunt"
    - PRIVATE_KEY=0x4a82fd2f72fe7a1f4258a3f091ecc06d4d523efc20fd4d0ce21c8bed799088c1
    - NETWORK=develop

before_install:
  - npm install -g ganache-cli truffle webpack

before_script:
  - pushd node_modules/@gooddollar/goodcontracts
  - npm i
  - npm run ganache &
  - npm run wait
  - npm run deploy
  - popd

script:
  - npm link @gooddollar/goodcontracts
  - npm run coverage -- --silent
  - npm run coveralls
  - npm run build
